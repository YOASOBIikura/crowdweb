(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{48312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(83961)}])},83961:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return M}});var i=t(85893),a=t(67294),s=t(2723),r=t(69077),l=t(31536),d=t(8987),u=t(87457),o=t(50657),p=t(31425),y=t(6514),c=t(37645),m=t(25662),g=t(5616),h=t(58703),x=t(21737);let T=e=>{let{refetch:n}=e,{address:t}=(0,r.mA)(),T={address:s.Lk,abi:s.Mt},[j,f]=a.useState(!1),[b,v]=(0,a.useState)(""),[Z,F]=a.useState(!1),[w,I]=(0,a.useState)(!1),C=()=>{f(!1)},_=(e,n)=>{F(!1)},k=()=>{F(!0)},S=(e,n)=>{I(!1)},E=()=>{I(!0)},{data:M,isLoading:N,isSuccess:B,writeAsync:z}=(0,r.GG)({...T,functionName:"newFunding",onSuccess(){f(!1),v("创建成功，但由于出块时间不确定，您需要等待一段时间才能看到筹资企划！"),E(),n()},onError(e){v(e.message),k()}});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.Z,{open:Z,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:6e3,onClose:_,children:(0,i.jsx)(x.Z,{onClose:_,severity:"error",sx:{width:"100%"},children:b})}),(0,i.jsx)(h.Z,{open:w,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:6e3,onClose:S,children:(0,i.jsx)(x.Z,{onClose:S,severity:"success",sx:{width:"100%"},children:b})}),(0,i.jsx)(l.Z,{direction:"row",spacing:2,sx:{justifyContent:"center",marginTop:2},children:(0,i.jsx)(d.Z,{variant:"contained",color:"secondary",onClick:()=>{f(!0)},children:"创建筹资项目吧"})}),(0,i.jsxs)(o.Z,{open:j,onClose:C,children:[(0,i.jsx)(c.Z,{children:"创建筹资项目"}),(0,i.jsxs)(y.Z,{children:[(0,i.jsxs)(g.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(u.Z,{id:"title",label:"项目名称",multiline:!0,maxRows:4}),(0,i.jsx)(u.Z,{id:"token",label:"项目ERC代币地址",placeholder:"0X....",multiline:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(u.Z,{id:"imageUri",label:"项目图片的IPFS地址",multiline:!0,maxRows:4,variant:"filled"}),(0,i.jsx)(u.Z,{id:"goal",label:"目标筹资金额",multiline:!0,variant:"filled"})]})]}),(0,i.jsx)(g.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"52ch"}},noValidate:!0,autoComplete:"off",children:(0,i.jsx)("div",{children:(0,i.jsx)(u.Z,{fullWidth:!0,id:"info",label:"项目介绍",multiline:!0,rows:4})})})]}),(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(m.Z,{onClick:C,children:"取消"}),(0,i.jsx)(m.Z,{onClick:()=>{let e=document.getElementById("title").value,n=document.getElementById("token").value,i=document.getElementById("imageUri").value,a=document.getElementById("goal").value;z({args:[t,n,e,document.getElementById("info").value,i,parseInt(a)]})},children:"确定"})]})]})]})};var j=t(90948),f=t(66242),b=t(83965),v=t(44267),Z=t(62023),F=t(57922),w=t(93946),I=t(15861),C=t(23508),_=t(58951);let k=(0,j.ZP)(e=>{let{expand:n,...t}=e;return(0,i.jsx)(w.Z,{...t})})(e=>{let{theme:n,expand:t}=e;return{transform:t?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:n.transitions.create("transform",{duration:n.transitions.duration.shortest})}}),S=e=>"".concat(e.slice(0,4),"...").concat(e.slice(38)),E=e=>{let{data:n,refetch:t}=e,{address:l}=(0,r.mA)(),d={address:s.Lk,abi:s.Mt},[h,x]=a.useState(!1),[T,j]=a.useState(!1),[w,E]=(0,a.useState)(""),[M,N]=a.useState(!1),[B,z]=(0,a.useState)(!1),O=()=>{j(!1)},{write:R}=(0,r.GG)({...d,functionName:"contribute",onSuccess(){E("贡献成功，但由于出块时间不确定，请稍后在OWNER页面进行确认！"),z(!0),O(),t()},onError(e){E(e.message),N(!0),O()}});return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(f.Z,{sx:{maxWidth:345,float:"left",marginLeft:3,marginBottom:2},children:[(0,i.jsx)(b.Z,{component:"img",height:"194",image:n.ImageUri,alt:"Paella dish"}),(0,i.jsx)(v.Z,{children:(0,i.jsxs)(g.Z,{children:[(0,i.jsxs)("div",{children:["筹划项目编号: ",String(n.FundId)]}),(0,i.jsxs)("div",{children:["项目名称: ",String(n.title)]}),(0,i.jsxs)("div",{children:["筹资发起地址: ",S(n.initiator)]}),(0,i.jsxs)("div",{children:["项目代币地址: ",S(n.token)]}),(0,i.jsxs)("div",{children:["项目筹资目标金额: ",String(n.goal)]}),(0,i.jsxs)("div",{children:["已筹资人数: ",String(n.investor_num)]}),(0,i.jsxs)("div",{children:["已筹资金额: ",String(n.getCash)]})]})}),(0,i.jsxs)(Z.Z,{disableSpacing:!0,children:[(0,i.jsx)(m.Z,{size:"large",color:"error",onClick:()=>{j(!0)},children:"贡献项目"}),(0,i.jsx)(k,{expand:h,onClick:()=>{x(!h)},"aria-expanded":h,"aria-label":"show more",children:(0,i.jsx)(C.Z,{})})]}),(0,i.jsx)(F.Z,{in:h,timeout:"auto",unmountOnExit:!0,children:(0,i.jsxs)(v.Z,{children:[(0,i.jsx)(I.Z,{paragraph:!0,children:"详细介绍:"}),(0,i.jsx)(I.Z,{paragraph:!0,children:String(n.info)})]})}),(0,i.jsxs)(o.Z,{open:T,onClose:O,children:[(0,i.jsx)(c.Z,{children:"Subscribe"}),(0,i.jsxs)(y.Z,{children:[(0,i.jsx)("img",{src:n.ImageUri,height:200,loading:"lazy"}),(0,i.jsx)(_.Z,{children:"注意您所贡献的金额单位是Wei并确保输入处于正常的范围，如果 您在筹资中途开始担忧项目的发展前景您可以在OWNER页面对该项目 进行撤资。 请注意撤资之后您在该项目的代币将会自动销毁！"}),(0,i.jsx)(u.Z,{autoFocus:!0,margin:"dense",id:"prize",label:"贡献金额",type:"text",fullWidth:!0,variant:"standard"})]}),(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(m.Z,{size:"large",onClick:O,children:"取消"}),(0,i.jsx)(m.Z,{size:"large",onClick:()=>{let e=document.getElementById("prize").value;R({args:[l,parseInt(n.FundId)],value:BigInt(e)})},children:"确定"})]})]})]},n.FundId)})};function M(){let{address:e}=(0,r.mA)(),n={address:s.Lk,abi:s.Mt},[t,l]=(0,a.useState)([]),{refetch:d}=(0,r.do)({...n,functionName:"getAllFunding",args:[],onSuccess(e){e.length>0&&(0==parseInt(e[0].FundId)?l([]):l(e))}});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T,{refetch:d}),(0,i.jsx)(g.Z,{sx:{padding:4},children:t.map(e=>(0,i.jsx)(E,{data:e,refetch:d},e.FundId))})]})}},2723:function(e){"use strict";e.exports=JSON.parse('{"Lk":"0x1Ea0d496528F809DfE1f1bB89C9e72C1cd71ad58","Mt":[{"inputs":[{"internalType":"uint256","name":"_FundId","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"stateMutability":"payable","type":"fallback"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"FundIds","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"invstor","type":"address"},{"internalType":"uint256","name":"_FundId","type":"uint256"}],"name":"contribute","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"invstor","type":"address"},{"internalType":"uint256","name":"_FundId","type":"uint256"}],"name":"disinvestment","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getAllFunding","outputs":[{"components":[{"internalType":"uint256","name":"FundId","type":"uint256"},{"internalType":"address","name":"initiator","type":"address"},{"internalType":"address","name":"token","type":"address"},{"internalType":"string","name":"title","type":"string"},{"internalType":"string","name":"info","type":"string"},{"internalType":"string","name":"ImageUri","type":"string"},{"internalType":"uint256","name":"goal","type":"uint256"},{"internalType":"bool","name":"success","type":"bool"},{"internalType":"uint256","name":"investor_num","type":"uint256"},{"internalType":"uint256","name":"getCash","type":"uint256"}],"internalType":"struct CrowdFunding.FundRes[]","name":"list","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"funder","type":"address"}],"name":"getFunding","outputs":[{"components":[{"internalType":"uint256","name":"FundId","type":"uint256"},{"internalType":"address","name":"initiator","type":"address"},{"internalType":"address","name":"token","type":"address"},{"internalType":"string","name":"title","type":"string"},{"internalType":"string","name":"info","type":"string"},{"internalType":"string","name":"ImageUri","type":"string"},{"internalType":"uint256","name":"goal","type":"uint256"},{"internalType":"bool","name":"success","type":"bool"},{"internalType":"uint256","name":"investor_num","type":"uint256"},{"internalType":"uint256","name":"getCash","type":"uint256"}],"internalType":"struct CrowdFunding.FundRes[]","name":"list","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"invstor","type":"address"},{"internalType":"address","name":"token","type":"address"}],"name":"getFundingToken","outputs":[{"internalType":"string","name":"","type":"string"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"getInvestorFunding","outputs":[{"components":[{"internalType":"uint256","name":"FundId","type":"uint256"},{"internalType":"address","name":"initiator","type":"address"},{"internalType":"address","name":"token","type":"address"},{"internalType":"string","name":"title","type":"string"},{"internalType":"string","name":"info","type":"string"},{"internalType":"string","name":"ImageUri","type":"string"},{"internalType":"uint256","name":"goal","type":"uint256"},{"internalType":"bool","name":"success","type":"bool"},{"internalType":"uint256","name":"investor_num","type":"uint256"},{"internalType":"uint256","name":"getCash","type":"uint256"}],"internalType":"struct CrowdFunding.FundRes[]","name":"list","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"},{"internalType":"address","name":"_token","type":"address"},{"internalType":"string","name":"_title","type":"string"},{"internalType":"string","name":"_info","type":"string"},{"internalType":"string","name":"_uri","type":"string"},{"internalType":"uint256","name":"_goal","type":"uint256"}],"name":"newFunding","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"totalFunds","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_FundId","type":"uint256"}],"name":"withDraw","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]}')}},function(e){e.O(0,[142,7457,4622,9774,2888,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);