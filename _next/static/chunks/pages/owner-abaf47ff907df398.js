(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4067],{18921:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/owner",function(){return t(74113)}])},74113:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return w}});var i=t(85893),a=t(67294),s=t(69077),r=t(2723),l=t(5616),d=t(90948),u=t(66242),o=t(83965),p=t(44267),y=t(62023),c=t(57922),m=t(93946),g=t(15861),h=t(23508),x=t(25662),T=t(87457),j=t(50657),b=t(31425),f=t(6514),Z=t(58951),v=t(37645);let F=(0,d.ZP)(e=>{let{expand:n,...t}=e;return(0,i.jsx)(m.Z,{...t})})(e=>{let{theme:n,expand:t}=e;return{transform:t?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:n.transitions.create("transform",{duration:n.transitions.duration.shortest})}}),k=e=>"".concat(e.slice(0,4),"...").concat(e.slice(38)),_=e=>{let{data:n,refetch:t}=e,{address:d}=(0,s.mA)(),m={address:r.Lk,abi:r.Mt},[_,w]=a.useState(!1),[S,I]=a.useState(!1),[C,M]=(0,a.useState)(""),[E,N]=a.useState(!1),[z,L]=(0,a.useState)(!1),[O,R]=(0,a.useState)(!1),[W,U]=(0,a.useState)([]),[B,G]=(0,a.useState)(!1),P=()=>{I(!1)},A=()=>{R(!1)},D=()=>{G(!1)},{isLoading:X}=(0,s.do)({...m,functionName:"getFundingToken",args:[d,n.token],onSuccess(e){U(e)}}),{write:J}=(0,s.GG)({...m,functionName:"contribute",onSuccess(){M("贡献成功，但由于出块时间不确定，请稍后在OWNER页面进行确认！"),L(!0),P(),t()},onError(e){M(e.message),N(!0),P()}}),{write:q}=(0,s.GG)({...m,functionName:"disinvestment",onSuccess(){M("撤资成功，但由于出块时间不确定，请稍后在OWNER页面进行确认！"),L(!0),D(),t()},onError(e){M(e.message),N(!0),D()}});return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(u.Z,{sx:{maxWidth:360,float:"left",marginLeft:3,marginBottom:2},children:[(0,i.jsx)(o.Z,{component:"img",height:"194",image:n.ImageUri,alt:"Paella dish"}),(0,i.jsx)(p.Z,{children:(0,i.jsxs)(l.Z,{children:[(0,i.jsxs)("div",{children:["筹划项目编号: ",String(n.FundId)]}),(0,i.jsxs)("div",{children:["项目名称: ",String(n.title)]}),(0,i.jsxs)("div",{children:["筹资发起地址: ",k(n.initiator)]}),(0,i.jsxs)("div",{children:["项目代币地址: ",k(n.token)]}),(0,i.jsxs)("div",{children:["项目筹资目标金额: ",String(n.goal)]}),(0,i.jsxs)("div",{children:["已筹资人数: ",String(n.investor_num)]}),(0,i.jsxs)("div",{children:["已筹资金额: ",String(n.getCash)]})]})}),(0,i.jsxs)(y.Z,{disableSpacing:!0,children:[(0,i.jsx)(x.Z,{sx:{marginLeft:1},variant:"outlined",size:"small",color:"error",onClick:()=>{I(!0)},children:"贡献项目"}),(0,i.jsx)(x.Z,{sx:{marginLeft:1},variant:"outlined",size:"small",color:"success",onClick:()=>{R(!0)},children:"查看已有项目代币"}),(0,i.jsx)(x.Z,{sx:{marginLeft:1},variant:"outlined",size:"small",color:"warning",onClick:()=>{G(!0)},children:"撤资项目"}),(0,i.jsx)(F,{expand:_,onClick:()=>{w(!_)},"aria-expanded":_,"aria-label":"show more",children:(0,i.jsx)(h.Z,{})})]}),(0,i.jsx)(c.Z,{in:_,timeout:"auto",unmountOnExit:!0,children:(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(g.Z,{paragraph:!0,children:"详细介绍:"}),(0,i.jsx)(g.Z,{paragraph:!0,children:String(n.info)})]})}),(0,i.jsxs)(j.Z,{open:S,onClose:P,children:[(0,i.jsx)(v.Z,{children:"Subscribe"}),(0,i.jsxs)(f.Z,{children:[(0,i.jsx)("img",{src:n.ImageUri,height:200,loading:"lazy"}),(0,i.jsx)(Z.Z,{children:"注意您所贡献的金额单位是Wei并确保输入处于正常的范围，如果 您在筹资中途开始担忧项目的发展前景您可以在OWNER页面对该项目 进行撤资。 请注意撤资之后您在该项目的代币将会自动销毁！"}),(0,i.jsx)(T.Z,{autoFocus:!0,margin:"dense",id:"prize",label:"贡献金额",type:"text",fullWidth:!0,variant:"standard"})]}),(0,i.jsxs)(b.Z,{children:[(0,i.jsx)(x.Z,{size:"large",onClick:P,children:"取消"}),(0,i.jsx)(x.Z,{size:"large",onClick:()=>{let e=document.getElementById("prize").value;J({args:[d,parseInt(n.FundId)],value:BigInt(e)})},children:"确定"})]})]}),(0,i.jsxs)(j.Z,{open:O,onClose:A,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,i.jsx)(v.Z,{id:"alert-dialog-title",children:"项目代币信息"}),(0,i.jsx)(f.Z,{children:(0,i.jsxs)(l.Z,{children:[(0,i.jsxs)("div",{children:["代币地址: ",String(n.token)]}),(0,i.jsxs)("div",{children:["代币符号: ",String(W[0])]}),(0,i.jsxs)("div",{children:["持有的数量: ",String(W[1])]})]})}),(0,i.jsx)(b.Z,{children:(0,i.jsx)(x.Z,{onClick:A,autoFocus:!0,children:"确定"})})]}),(0,i.jsxs)(j.Z,{open:B,onClose:D,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,i.jsx)(v.Z,{id:"alert-dialog-title",children:"回撤资金"}),(0,i.jsx)(f.Z,{children:(0,i.jsx)(Z.Z,{id:"alert-dialog-description",children:"你确定要回撤贡献的资金？回撤资金后你所参与项目的所有代币将会被销毁 并且不可恢复，请谨慎做出你的选择！"})}),(0,i.jsxs)(b.Z,{children:[(0,i.jsx)(x.Z,{onClick:D,children:"取消"}),(0,i.jsx)(x.Z,{onClick:()=>{q({args:[d,parseInt(n.FundId)]})},autoFocus:!0,children:"确定"})]})]})]},n.FundId)})};function w(){let{address:e}=(0,s.mA)(),n={address:r.Lk,abi:r.Mt},[t,d]=(0,a.useState)([]),{refetch:u}=(0,s.do)({...n,functionName:"getInvestorFunding",args:[e],onSuccess(e){console.log("data",e),e.length>0&&d(e)}});return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l.Z,{sx:{padding:4},children:t.map(e=>(0,i.jsx)(_,{data:e,refetch:u},e.FundId))})})}},2723:function(e){"use strict";e.exports=JSON.parse('{"Lk":"0x1Ea0d496528F809DfE1f1bB89C9e72C1cd71ad58","Mt":[{"inputs":[{"internalType":"uint256","name":"_FundId","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"stateMutability":"payable","type":"fallback"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"FundIds","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"invstor","type":"address"},{"internalType":"uint256","name":"_FundId","type":"uint256"}],"name":"contribute","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"invstor","type":"address"},{"internalType":"uint256","name":"_FundId","type":"uint256"}],"name":"disinvestment","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getAllFunding","outputs":[{"components":[{"internalType":"uint256","name":"FundId","type":"uint256"},{"internalType":"address","name":"initiator","type":"address"},{"internalType":"address","name":"token","type":"address"},{"internalType":"string","name":"title","type":"string"},{"internalType":"string","name":"info","type":"string"},{"internalType":"string","name":"ImageUri","type":"string"},{"internalType":"uint256","name":"goal","type":"uint256"},{"internalType":"bool","name":"success","type":"bool"},{"internalType":"uint256","name":"investor_num","type":"uint256"},{"internalType":"uint256","name":"getCash","type":"uint256"}],"internalType":"struct CrowdFunding.FundRes[]","name":"list","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"funder","type":"address"}],"name":"getFunding","outputs":[{"components":[{"internalType":"uint256","name":"FundId","type":"uint256"},{"internalType":"address","name":"initiator","type":"address"},{"internalType":"address","name":"token","type":"address"},{"internalType":"string","name":"title","type":"string"},{"internalType":"string","name":"info","type":"string"},{"internalType":"string","name":"ImageUri","type":"string"},{"internalType":"uint256","name":"goal","type":"uint256"},{"internalType":"bool","name":"success","type":"bool"},{"internalType":"uint256","name":"investor_num","type":"uint256"},{"internalType":"uint256","name":"getCash","type":"uint256"}],"internalType":"struct CrowdFunding.FundRes[]","name":"list","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"invstor","type":"address"},{"internalType":"address","name":"token","type":"address"}],"name":"getFundingToken","outputs":[{"internalType":"string","name":"","type":"string"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"getInvestorFunding","outputs":[{"components":[{"internalType":"uint256","name":"FundId","type":"uint256"},{"internalType":"address","name":"initiator","type":"address"},{"internalType":"address","name":"token","type":"address"},{"internalType":"string","name":"title","type":"string"},{"internalType":"string","name":"info","type":"string"},{"internalType":"string","name":"ImageUri","type":"string"},{"internalType":"uint256","name":"goal","type":"uint256"},{"internalType":"bool","name":"success","type":"bool"},{"internalType":"uint256","name":"investor_num","type":"uint256"},{"internalType":"uint256","name":"getCash","type":"uint256"}],"internalType":"struct CrowdFunding.FundRes[]","name":"list","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"},{"internalType":"address","name":"_token","type":"address"},{"internalType":"string","name":"_title","type":"string"},{"internalType":"string","name":"_info","type":"string"},{"internalType":"string","name":"_uri","type":"string"},{"internalType":"uint256","name":"_goal","type":"uint256"}],"name":"newFunding","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"totalFunds","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_FundId","type":"uint256"}],"name":"withDraw","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]}')}},function(e){e.O(0,[142,7457,9774,2888,179],function(){return e(e.s=18921)}),_N_E=e.O()}]);